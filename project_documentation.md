# 📋 توثيق مشروع المتجر الإلكتروني - Gayar Plus

**تاريخ الإنشاء:** 2025-08-16  
**آخر تحديث:** 2025-08-16  
**النسخة:** 3.0.0  
**الحالة:** نشط ومُحسّن  

---

## 🎯 نظرة عامة على المشروع

### الوصف
نظام متكامل لإدارة متجر الأجهزة الذكية وملحقاتها يتضمن:
- **المخزن المؤقت**: لرفع وتصنيف المنتجات من ملفات CSV/Excel
- **نظام التصنيف الذكي**: تصنيف تلقائي للمنتجات حسب العلامة التجارية والنوع
- **الواجهة الإدارية**: لإدارة المنتجات والطلبات والمخزون
- **المتجر الإلكتروني**: واجهة عصرية للعملاء للتسوق والشراء
- **نظام الألوان المتقدم**: إدارة ألوان المنتجات مع أكواد الألوان
- **نظام تنظيف النصوص**: تنظيف النصوص من HTML tags والتنسيق غير المرغوب

### التقنيات المستخدمة
- **Backend**: PHP 8.0+, MySQL/MariaDB
- **Frontend**: HTML5, CSS3, JavaScript (ES6+), Bootstrap 4
- **المكتبات الأساسية**:
  - AdminLTE v3.x (لوحة التحكم)
  - jQuery 3.x
  - DataTables (جداول البيانات)
  - SweetAlert2 (التنبيهات)
  - Chart.js (الرسوم البيانية)
- **الأدوات المساعدة**:
  - PhpSpreadsheet (قراءة ملفات Excel)
  - CSV Reader متقدم يدعم العربية
  - نظام رفع الصور مع ضغط تلقائي
  - QR Code Generator

---

## 🏗️ هيكل المشروع

### المجلدات الرئيسية

```
gayar_plus/
├── 📁 admin/                    # الواجهة الإدارية
│   ├── 📁 images/              # صور النظام الإداري
│   ├── 📁 inc/                 # ملفات التضمين الإدارية
│   ├── 📁 inventory/           # إدارة المخزون
│   ├── 📁 maintenance/         # إدارة التصنيفات
│   ├── 📁 orders/              # إدارة الطلبات
│   ├── 📁 product/             # إدارة المنتجات
│   ├── 📁 system_info/         # معلومات النظام
│   ├── 📁 user/                # إدارة المستخدمين
│   └── 📁 warehouse/           # نظام المخزن المتقدم
├── 📁 assets/                   # الأصول العامة
│   ├── 📁 css/                 # ملفات الأنماط المخصصة
│   └── 📁 js/                  # السكريبت المخصصة
├── 📁 build/                    # ملفات البناء (AdminLTE)
├── 📁 classes/                  # فئات النظام
├── 📁 database/                 # ملفات قاعدة البيانات
├── 📁 dist/                     # الملفات المُجمّعة (AdminLTE)
├── 📁 inc/                      # ملفات التضمين العامة
├── 📁 libs/                     # المكتبات الخارجية
├── 📁 plugins/                  # إضافات AdminLTE والمكتبات
├── 📁 uploads/                  # ملفات الرفع والصور
└── 📁 vendor/                   # مكتبات Composer
```

### الملفات الأساسية

#### ملفات الواجهة الأمامية
- `index.php` - الصفحة الرئيسية
- `home.php` - الصفحة الرئيسية للمحتوى
- `products.php` - عرض المنتجات
- `view_product.php` - تفاصيل المنتج
- `cart.php` - سلة التسوق
- `checkout.php` - إتمام الطلب
- `login.php` / `registration.php` - تسجيل الدخول والتسجيل
- `my_account.php` - حساب المستخدم
- `contact.php` - اتصل بنا

#### ملفات الإعداد والنظام
- `config.php` - إعدادات قاعدة البيانات
- `initialize.php` - تهيئة النظام
- `404.html` - صفحة الخطأ 404
- `.htaccess` - إعدادات Apache

---

## 🗄️ هيكل قاعدة البيانات

### الجداول الأساسية

#### `products` - المنتجات المنشورة
```sql
- id (PRIMARY KEY)
- name (varchar(255)) - اسم المنتج
- description (text) - وصف المنتج
- category_id (int) - معرف الفئة
- sub_category_id (int) - معرف الفئة الفرعية
- brand (varchar(100)) - العلامة التجارية
- price (decimal(10,2)) - السعر
- image_path (varchar(500)) - مسار الصورة
- status (tinyint) - حالة النشر (0/1)
- has_colors (tinyint) - يحتوي على ألوان (0/1)
- created_at (timestamp)
- updated_at (timestamp)
```

#### `temp_warehouse` - المخزن المؤقت
```sql
- id (PRIMARY KEY)
- product_name (varchar(500)) - اسم المنتج الأصلي
- original_price (varchar(100)) - السعر الأصلي
- cleaned_price (decimal(10,2)) - السعر المنظف
- detected_brand (varchar(100)) - العلامة التجارية المكتشفة
- confidence_score (decimal(3,2)) - درجة الثقة في التصنيف
- category_id (int) - معرف الفئة المقترحة
- sub_category_id (int) - معرف الفئة الفرعية المقترحة
- classification_status (varchar(20)) - حالة التصنيف
- is_published (tinyint) - تم النشر (0/1)
- upload_batch (varchar(100)) - دفعة الرفع
- created_at (timestamp)
```

#### `categories` - الفئات الرئيسية (العلامات التجارية)
```sql
- id (PRIMARY KEY)
- name (varchar(255)) - اسم الفئة
- description (text) - الوصف
- emoji (varchar(10)) - إيموجي الفئة
- logo (varchar(255)) - شعار الفئة
- category_type (enum: 'devices', 'accessories') - نوع الفئة
- status (tinyint) - الحالة (0/1)
- created_at (timestamp)
```

#### `sub_categories` - الفئات الفرعية (أجهزة محددة)
```sql
- id (PRIMARY KEY)
- name (varchar(255)) - اسم الفئة الفرعية
- category_id (int) - معرف الفئة الرئيسية
- description (text) - الوصف
- status (tinyint) - الحالة (0/1)
- created_at (timestamp)
```

#### `product_colors` - ألوان المنتجات ✅
```sql
- id (PRIMARY KEY)
- product_id (int) - معرف المنتج
- color_name (varchar(100)) - اسم اللون
- color_code (varchar(20)) - كود اللون الهيكسادسيمي
- created_at (timestamp)
```

#### `inventory` - المخزون والأسعار
```sql
- id (PRIMARY KEY)
- product_id (int) - معرف المنتج
- quantity (int) - الكمية
- size (varchar(50)) - الحجم/المقاس
- price (decimal(10,2)) - السعر
- cost (decimal(10,2)) - التكلفة
```

#### `orders` - الطلبات
```sql
- id (PRIMARY KEY)
- customer_id (int) - معرف العميل
- order_code (varchar(100)) - رمز الطلب
- total_amount (decimal(10,2)) - إجمالي المبلغ
- status (tinyint) - حالة الطلب
- delivery_address (text) - عنوان التوصيل
- created_at (timestamp)
```

---

## 🧠 نظام التصنيف الذكي

### المميزات الرئيسية
- **دقة عالية**: تصل إلى 95% في التصنيف
- **دعم العربية والإنجليزية**: معالجة متقدمة للنصوص ثنائية اللغة
- **قاموس شامل**: يحتوي على 500+ كلمة مفتاحية و16 علامة تجارية
- **تعلم تدريجي**: تحسين الدقة مع الاستخدام
- **درجة الثقة**: قياس دقة كل تصنيف

### الشركات والعلامات التجارية المدعومة

#### الشركات الرئيسية (16 شركة)
| العلامة التجارية | الإيموجي | الاختصارات المدعومة |
|-------------------|----------|----------------------|
| **Apple** | 🍎 | `iphone`, `iph`, `ip`, `ios`, `ايفون`, `ابل` |
| **Samsung** | 📱 | `samsung`, `galaxy`, `gal`, `note`, `سام`, `سامسونج` |
| **Huawei** | 🔥 | `huawei`, `mate`, `p`, `هواوي` |
| **Honor** | 🏆 | `honor`, `magic`, `اونر`, `هونر` |
| **Xiaomi** | ⚡ | `xiaomi`, `mi`, `redmi`, `شاومي`, `ريدمي` |
| **Oppo** | 💎 | `oppo`, `reno`, `find`, `أوبو`, `اوبو` |
| **OnePlus** | 🚀 | `oneplus`, `onep`, `ون بلس` |
| **Google** | 🔍 | `google`, `pixel`, `جوجل`, `بيكسل` |
| **Vivo** | 🌟 | `vivo`, `فيفو` |
| **Realme** | 💪 | `realme`, `ريل مي` |
| **Tecno** | 🎯 | `tecno`, `phantom`, `camon`, `تكنو` |
| **Infinix** | ♾️ | `infinix`, `zero`, `hot`, `انفينيكس` |
| **Nothing** | ✨ | `nothing`, `ناثنج` |
| **Motorola** | 📡 | `motorola`, `moto`, `موتورولا` |
| **Sony** | 🎮 | `sony`, `xperia`, `سوني` |
| **Nokia** | 📞 | `nokia`, `نوكيا` |

#### أنواع الملحقات المدعومة
| النوع | الكلمات المفتاحية | الوصف |
|-------|-------------------|-------|
| **شاشة** | `lcd`, `display`, `scr`, `شاشة` | شاشات الاستبدال |
| **بطارية** | `battery`, `bat`, `بطارية` | بطاريات الهواتف |
| **شاحن** | `charger`, `chg`, `شاحن` | شواحن وكابلات |
| **كابل** | `cable`, `cab`, `كابل` | كابلات البيانات |
| **جراب** | `case`, `cover`, `جراب`, `غطاء` | جرابات الحماية |
| **واقي شاشة** | `screen`, `protector`, `واقي` | واقيات الشاشة |

---

## 🎨 نظام تنظيف النصوص المتقدم

### فئة TextCleaner
تم تطوير نظام متقدم لتنظيف النصوص من HTML tags والخصائص غير المرغوبة:

#### الطرق الأساسية
- `cleanText($text)` - تنظيف أساسي
- `deepClean($text)` - تنظيف عميق للنصوص المشفرة ⭐
- `ultraClean($text)` - تنظيف شامل نهائي 🚀
- `cleanAndTruncate($text, $length)` - تنظيف مع اقتطاع
- `cleanForHtml($text)` - تنظيف للعرض الآمن

#### المشاكل المحلولة
- ✅ إزالة HTML tags وخصائص CSS
- ✅ معالجة النصوص المشفرة مرتين أو أكثر
- ✅ تنظيف `style`, `data-huuid`, `class`, `id` attributes
- ✅ إزالة المسافات الزائدة والأسطر الفارغة
- ✅ حماية من XSS attacks

---

## 📤 نظام رفع الملفات المحسن

### المميزات الجديدة
- **دعم متعدد الترميز**: UTF-8, Windows-1256, ISO-8859-6, CP1256
- **تشخيص تلقائي**: اكتشاف نوع الترميز والفواصل
- **معالجة أخطاء متقدمة**: تقارير مفصلة مع اقتراحات الإصلاح
- **شريط تقدم**: متابعة مرئية لعملية الرفع
- **إحصائيات مفصلة**: عرض نتائج التصنيف بالنسب المئوية

### الملفات المدعومة
- ملفات CSV (جميع الترميزات)
- ملفات Excel (.xlsx, .xls)
- ملفات نصية (.txt)
- رفع متعدد الملفات

### مثال على النتائج
```
✅ تم معالجة: 150 منتج
🎯 تم تصنيف: 143 منتج (95.3%)
⚠️ غير مصنف: 7 منتجات (4.7%)
❌ أخطاء: 0
⏱️ وقت المعالجة: 2.3 ثانية
```

---

## 🎨 نظام الألوان المتقدم

### المميزات
- **إدارة ألوان مرنة**: إضافة ألوان متعددة لكل منتج
- **أكواد الألوان**: دعم الأكواد الهيكسادسيمية
- **عرض تفاعلي**: معاينة الألوان في الواجهة
- **تصفية بالألوان**: البحث والتصفية حسب اللون

### استخدام النظام
```php
// إضافة لون جديد
$colors = [
    ['name' => 'أحمر', 'code' => '#FF0000'],
    ['name' => 'أزرق', 'code' => '#0000FF']
];

// حفظ ألوان المنتج
foreach($colors as $color) {
    // حفظ في product_colors table
}
```

---

## 📊 الإحصائيات والتحليلات

### مؤشرات الأداء الحالية
- **إجمالي المنتجات**: يتم حسابها ديناميكياً
- **المنتجات المصنفة**: 95% معدل نجاح التصنيف
- **الطلبات المكتملة**: تتبع شهري
- **العملاء النشطون**: إحصائيات أسبوعية

### الرسوم البيانية
- رسم بياني لتوزيع المنتجات حسب العلامة التجارية
- إحصائيات المبيعات الشهرية
- معدلات التصنيف والدقة
- حالة المخزون والكميات

---

## 🚀 التحسينات والتطويرات المستقبلية

### المرحلة القادمة
- [ ] **API RESTful**: تطوير API للتكامل مع أنظمة خارجية
- [ ] **نظام التوصيات**: اقتراح منتجات للعملاء
- [ ] **تحليلات متقدمة**: تقارير مفصلة للمبيعات
- [ ] **نظام الدفع**: تكامل مع بوابات الدفع المحلية
- [ ] **تطبيق جوال**: تطوير تطبيق Android/iOS

### التحسينات المستمرة
- [ ] **تحسين الأمان**: مراجعة أمنية شاملة
- [ ] **تحسين الأداء**: تحسين استعلامات قاعدة البيانات
- [ ] **دعم اللغات**: إضافة دعم اللغة الإنجليزية
- [ ] **نسخ احتياطية تلقائية**: نظام نسخ احتياطي مجدول

---

## 🛠️ إرشادات التطوير والصيانة

### متطلبات النظام
- **PHP**: 8.0 أو أحدث
- **MySQL/MariaDB**: 5.7 أو أحدث
- **Apache/Nginx**: مع mod_rewrite
- **مساحة التخزين**: 2GB كحد أدنى
- **RAM**: 1GB كحد أدنى

### ملفات الإعداد المهمة
- `config.php` - إعدادات قاعدة البيانات
- `initialize.php` - تهيئة النظام والجلسات
- `.htaccess` - إعدادات URL rewriting
- `classes/DBConnection.php` - اتصال قاعدة البيانات

### أفضل الممارسات
1. **النسخ الاحتياطية**: إنشاء نسخة احتياطية قبل كل تحديث كبير
2. **الاختبار**: اختبار كل ميزة جديدة في بيئة التطوير أولاً
3. **التوثيق**: توثيق جميع التغييرات في هذا الملف
4. **الأمان**: مراجعة الأمان بانتظام ومعالجة الثغرات
5. **الأداء**: مراقبة الأداء وتحسين الاستعلامات البطيئة

### دليل استكشاف الأخطاء
#### مشاكل شائعة وحلولها
1. **خطأ في اتصال قاعدة البيانات**
   - تحقق من إعدادات `config.php`
   - تأكد من تشغيل خدمة MySQL
   - راجع صلاحيات المستخدم

2. **مشاكل في رفع الملفات**
   - تحقق من صلاحيات مجلد `uploads/`
   - راجع إعدادات `upload_max_filesize` في PHP
   - تأكد من صحة ترميز الملف

3. **أخطاء في التصنيف**
   - تحقق من ملف `enhanced_classification.php`
   - راجع قاموس الكلمات المفتاحية
   - تأكد من صحة بيانات الفئات

---

## 📞 الدعم الفني والاتصال

### فريق التطوير
- **المطور الرئيسي**: PureAI Development Team
- **البريد الإلكتروني**: support@gayarplus.com
- **الموقع الإلكتروني**: https://gayarplus.com

### للدعم الفني السريع
1. راجع هذا الملف أولاً للحلول
2. تحقق من ملفات السجل للأخطاء
3. اختبر كل خطوة على حدة
4. اتصل بفريق الدعم مع تفاصيل الخطأ

### سجل الإصدارات
- **v3.0.0** (2025-08-16): نظام شامل محسن مع تنظيف وإعادة هيكلة
- **v2.2.0** (2025-01-17): إضافة نظام الألوان وتحسين التصنيف  
- **v2.1.0** (2025-01-16): تحسينات الواجهة ونظام المخزن المتقدم
- **v2.0.0** (2025-01-15): إعادة تصميم شاملة مع نظام التصنيف الذكي
- **v1.5.0** (2024-12-20): إضافة نظام إدارة المخزون
- **v1.0.0** (2024-12-01): الإصدار الأول

---

## 📋 قائمة المراجعة للصيانة الدورية

### يومياً
- [ ] مراجعة ملفات السجل للأخطاء
- [ ] تحديث إحصائيات المخزون
- [ ] مراجعة الطلبات الجديدة
- [ ] فحص حالة النظام

### أسبوعياً  
- [ ] نسخة احتياطية لقاعدة البيانات
- [ ] مراجعة دقة التصنيف التلقائي
- [ ] تنظيف الملفات المؤقتة
- [ ] تحديث قاموس الكلمات المفتاحية

### شهرياً
- [ ] تحليل الأداء والإحصائيات
- [ ] مراجعة أمنية شاملة
- [ ] تحديث المكتبات والإضافات
- [ ] اختبار شامل للنظام

### سنوياً
- [ ] تحديث النظام للإصدار الجديد
- [ ] مراجعة شاملة للكود
- [ ] تدريب الفريق على المميزات الجديدة
- [ ] تقييم واستبدال التقنيات القديمة

---

**آخر تحديث:** 2025-08-16  
**حالة المشروع:** نشط ومحدث باستمرار  
**الإصدار:** v3.0.0 - Enhanced & Optimized  

*هذا الملف يعتبر المرجع الوحيد والشامل لجميع معلومات المشروع وتوثيقه الفني*
