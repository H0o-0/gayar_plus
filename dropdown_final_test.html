<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropdown Final Test</title>
    <link rel="stylesheet" href="assets/css/site-wide.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            padding: 20px;
            background: #f8fafc;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .instructions {
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .test-result {
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>اختبار القائمة المنسدلة النهائية</h1>
        
        <div class="instructions">
            <h2>تعليمات الاختبار:</h2>
            <ol>
                <li>ضع مؤشر الماوس على عنصر "الأجهزة" في شريط التنقل أدناه</li>
                <li>يجب أن تظهر القائمة المنسدلة ولا تختفي بسرعة</li>
                <li>يمكنك تحريك الماوس إلى القائمة المنسدلة والاستمرار في استخدامها</li>
                <li>القائمة يجب أن تبقى مرئية حتى تبتعد بمؤشر الماوس عن المنطقة</li>
            </ol>
        </div>
        
        <!-- Navigation Bar -->
        <nav class="navbar" id="navbar" style="position: relative;">
            <div class="nav-container">
                <ul class="nav-menu">
                    <li class="nav-item nav-devices">
                        <a href="#" class="nav-link">الأجهزة</a>
                        <div class="mega-menu">
                            <div class="menu-grid">
                                <div class="menu-section">
                                    <h4 class="menu-title">الشركات</h4>
                                    <div class="menu-item brand-item" data-brand="1">
                                        <div class="brand-icon">
                                            <i class="fab fa-apple"></i>
                                        </div>
                                        <span>Apple</span>
                                    </div>
                                    <div class="menu-item brand-item" data-brand="2">
                                        <div class="brand-icon">
                                            <i class="fab fa-android"></i>
                                        </div>
                                        <span>Samsung</span>
                                    </div>
                                    <div class="menu-item brand-item" data-brand="3">
                                        <div class="brand-icon">
                                            <i class="fas fa-mobile-alt"></i>
                                        </div>
                                        <span>Xiaomi</span>
                                    </div>
                                </div>
                                
                                <div class="menu-section">
                                    <h4 class="menu-title">الفئات</h4>
                                    <div id="categories-section">
                                        <div class="menu-item">اختر شركة لعرض الفئات</div>
                                    </div>
                                </div>
                                
                                <div class="menu-section">
                                    <h4 class="menu-title">الهواتف</h4>
                                    <div id="phones-section">
                                        <div class="menu-item">اختر فئة لعرض الهواتف</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">أدوات الصيانة</a>
                        <div class="mega-menu">
                            <div class="menu-grid">
                                <div class="menu-section">
                                    <div class="menu-item">قريباً</div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">من نحن</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">اتصل بنا</a>
                    </li>
                </ul>
            </div>
        </nav>
        
        <div class="test-result">
            <h2>نتيجة الاختبار:</h2>
            <p>إذا كانت القائمة المنسدلة تعمل بشكل صحيح، فهذا يعني أن المشكلة قد تم حلها.</p>
            <p>الآن يمكنك العودة إلى موقعك والتحقق من أن القائمة تعمل بشكل صحيح على جميع الصفحات.</p>
        </div>
    </div>

    <script>
        // Enhanced navigation JavaScript with proper hover functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Get the devices dropdown container
            const devicesNavItem = document.querySelector('.nav-devices');
            const megaMenu = devicesNavItem.querySelector('.mega-menu');
            
            if (devicesNavItem && megaMenu) {
                let hideTimeout;
                
                // Show dropdown on hover
                devicesNavItem.addEventListener('mouseenter', function() {
                    // Clear any existing timeout
                    if (hideTimeout) {
                        clearTimeout(hideTimeout);
                        hideTimeout = null;
                    }
                    
                    // Add show class to display the menu
                    devicesNavItem.classList.add('show');
                });
                
                // Hide dropdown when mouse leaves
                devicesNavItem.addEventListener('mouseleave', function() {
                    // Set a timeout to hide the menu (allows moving mouse to menu)
                    hideTimeout = setTimeout(function() {
                        devicesNavItem.classList.remove('show');
                    }, 300); // 300ms delay to allow moving mouse to menu
                });
                
                // Keep menu visible when hovering over it
                megaMenu.addEventListener('mouseenter', function() {
                    // Clear any existing timeout
                    if (hideTimeout) {
                        clearTimeout(hideTimeout);
                        hideTimeout = null;
                    }
                    
                    // Ensure menu stays visible
                    devicesNavItem.classList.add('show');
                });
                
                // Hide menu when leaving it
                megaMenu.addEventListener('mouseleave', function() {
                    // Set a timeout to hide the menu
                    hideTimeout = setTimeout(function() {
                        devicesNavItem.classList.remove('show');
                    }, 300); // 300ms delay
                });
            }
            
            // Handle brand items for demonstration
            const brandItems = document.querySelectorAll('.brand-item');
            brandItems.forEach(function(item) {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const brandId = this.dataset.brand;
                    
                    // Remove active class from all items
                    brandItems.forEach(i => i.classList.remove('active'));
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Show sample categories
                    const categoriesSection = document.getElementById('categories-section');
                    if (categoriesSection) {
                        categoriesSection.innerHTML = `
                            <div class="menu-item" data-category="1">iPhone 15 Series</div>
                            <div class="menu-item" data-category="2">iPhone 14 Series</div>
                            <div class="menu-item" data-category="3">iPhone 13 Series</div>
                        `;
                        
                        // Add click handlers to categories
                        categoriesSection.querySelectorAll('.menu-item').forEach(catItem => {
                            catItem.addEventListener('click', function(e) {
                                e.stopPropagation();
                                // Show sample models
                                const phonesSection = document.getElementById('phones-section');
                                if (phonesSection) {
                                    phonesSection.innerHTML = `
                                        <div class="menu-item">iPhone 15 Pro Max</div>
                                        <div class="menu-item">iPhone 15 Pro</div>
                                        <div class="menu-item">iPhone 15 Plus</div>
                                        <div class="menu-item">iPhone 15</div>
                                    `;
                                }
                            });
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>